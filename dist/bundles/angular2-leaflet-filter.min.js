/*! @asymmetrik/angular2-leaflet-filter-1.1 - Copyright Asymmetrik, Ltd. 2007-2017 - All Rights Reserved.*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("leaflet"),require("@asymmetrik/leaflet-filter"),require("@asymmetrik/angular2-leaflet")):"function"==typeof define&&define.amd?define(["exports","@angular/core","leaflet","@asymmetrik/leaflet-filter","@asymmetrik/angular2-leaflet"],t):t(e.angular2LeafletFilter=e.angular2LeafletFilter||{},e.ng.core,e.L,null,e.angular2Leaflet)}(this,function(e,t,i,r,l){"use strict";var a=function(){function e(e){this.filterOptions=null,this.filterStateChange=new t.EventEmitter,this.controlReady=new t.EventEmitter,this.leafletDirective=new l.LeafletDirectiveWrapper(e)}return e.prototype.ngOnInit=function(){var e=this;this.leafletDirective.init(),this.filterOptions=this.initializeFilterOptions(this.filterOptions),this.filterControl=i.control.filter(this.filterOptions),this.featureGroup=this.filterOptions.featureGroup,this.filterControl.addTo(this.leafletDirective.getMap()),this.leafletDirective.getMap().on("filter:filter",function(t){setTimeout(function(){e.filterStateChange.emit(t.geo)})}),this.filterControl.setFilter(this.filterState),this.controlReady.emit(this.filterControl)},e.prototype.ngOnChanges=function(e){e.filterState&&null!=this.filterControl&&this.filterControl.setFilter(e.filterState.currentValue)},e.prototype.initializeFilterOptions=function(e){return null==e&&(e={featureGroup:null}),null==e.featureGroup&&(e.featureGroup=i.featureGroup(),this.leafletDirective.getMap().addLayer(e.featureGroup)),e},e}();__decorate([t.Input("leafletFilterOptions"),__metadata("design:type",Object)],a.prototype,"filterOptions",void 0),__decorate([t.Input("leafletFilterState"),__metadata("design:type",Object)],a.prototype,"filterState",void 0),__decorate([t.Output("leafletFilterStateChange"),__metadata("design:type",Object)],a.prototype,"filterStateChange",void 0),__decorate([t.Output("leafletFilterControlReady"),__metadata("design:type",Object)],a.prototype,"controlReady",void 0),a=__decorate([t.Directive({selector:"[leafletFilter]"}),__metadata("design:paramtypes",[l.LeafletDirective])],a),e.LeafletFilterModule=function(){function e(){}return e}(),e.LeafletFilterModule=__decorate([t.NgModule({imports:[],exports:[a],declarations:[a],providers:[]})],e.LeafletFilterModule),Object.defineProperty(e,"__esModule",{value:!0})});